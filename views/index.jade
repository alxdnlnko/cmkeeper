doctype
html(ng-app="cmIndex")
  head
    link(href="https://fonts.googleapis.com/css?family=RobotoDraft:regular,bold,italic,thin,light,bolditalic,black,medium&subset=latin,cyrillic" rel="stylesheet" type="text/css")
    link(rel="stylesheet", href="/public/css/index.min.css")
    link(rel="stylesheet", href="/public/vendor/font-awesome/css/font-awesome.min.css")
    script(src="/public/js/index.min.js")
  body(ng-controller="PageCtrl")
    .l-nav-bar.nav-bar
      .l-nav-bar-header.nav-bar-header CMKeeper
      .l-nav-bar-categories.nav-bar-categories
        ul.categories-list
          li.category(
            ng-repeat="category in categories",
            ng-click="selectCategory(category)",
            ng-class="{'category--active': category == currentCategory}") {{ category }}
      .l-nav-bar-footer.nav-bar-footer

    .l-content.content
      .l-header.header
        .caption
          .caption-item.caption-category-name {{ currentCategory }}
          .caption-item.caption-arrow.fa.fa-angle-right(ng-show="!!currentNote")
          .caption-item.caption-note-name {{ currentNote.name }}
        .l-header-actions.header-actions
          .header-action.header-action-settings.fa.fa-plus
          .header-action.header-action-settings.fa.fa-cog

      .l-notes-bar.notes-bar
        .notes-block(
            ng-class="{'notes-block--open': showNonArcihved}")
          .notes-block-header(ng-click="toggleNonArchived()") Заметки
            .notes-block-toggle.fa.fa-caret-right
          ul.notes-list
            li.note(
                ng-repeat="note in notes | filter: filterNonArchived",
                ng-class="{'note--active': note == currentNote}",
                ng-click="selectNote(note)")
              .note-name {{ note.name }}
              .note-action

        .notes-block(
            ng-class="{'notes-block--open': showArcihved}")
          .notes-block-header(ng-click="toggleArchived()") Архив
            .notes-block-toggle.fa.fa-caret-right
          ul.notes-list
            li.note(
                ng-repeat="note in notes | filter: filterArchived",
                ng-class="{'note--active': note == currentNote}",
                ng-click="selectNote(note)")
              .note-name {{ note.name }}
              .note-action

      .l-note-view.note-view(ng-show="!isEditing")
        .l-note-view-header.note-view-header
          .l-note-view-actions.note-view-actions
            .note-view-action.note-view-action--edit(ng-click="isEditing = !isEditing") EDIT

          .l-note-view-extras.note-view-extras
            .note-view-extra.fa.fa-ellipsis-v.fa-lg
        .l-note-view-content.note-view-content.markdown {{ currentNote.content }}

      .l-note-view.note-edit(ng-show="isEditing")
        .l-note-view-header.note-edit-header
          input.note-edit-name(type="text")
          .l-note-view-actions.note-edit-actions
            .note-edit-action.note-edit-action--save SAVE
            .note-edit-action.note-edit-action--cancel CANCEL

          .l-note-view-extras.note-edit-extras
            .note-edit-extra.fa.fa-ellipsis-v.fa-lg

          .l-note-view-content.note-edit-content
            textarea.note-edit-editor {{ currentNote.content }}
